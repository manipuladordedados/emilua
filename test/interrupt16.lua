-- Interrupt on join

fib = spawn(function()
    local f2 = spawn(function()
        fib:interrupt()
    end)
    print('foo')
    local ok = pcall(function()
        f2:join()
        print('bar')
    end)
    print(ok)
    this_fiber.disable_interruption()
    local ok = pcall(function()
        this_fiber.restore_interruption()
        f2:join()
    end)
    print(ok)
    this_fiber.disable_interruption()
    f2:join()
    print('baz')
    f2:join() --< now invalid
    print('qux')
end)
